
## The validatable data types

The types generated by the **enum**, **struct**, **interface** and **class** are all validatable data types.

The validatable data types can be used in any place that need value validation like struct member field, property type, argument type and etc:

```lua
require "PLoop" (function(_ENV)
	-- String is a struct type
	class "Person" { Name = String }

	o = Person()

	-- Error:  the Name must be string, got number
	o.Name = 123
end)
```

```lua
require "PLoop" (function(_ENV)
	__Arguments__{ String, Number }
	function SetInfo(name, age)
	end

	-- Error: Usage: SetInfo(System.String, System.Number) - the 2nd argument must be number, got boolean
	SetInfo("Ann", true)
end)
```

To be a validatable data type, its prototype must provide a methods:

* ValidateValue(type, value[, onlyValid])   - validate the value with the type
	* Params:
		* type      - the validatable data type
		* value     - the value to be validated
		* onlyValid - only validate the value if true, won't modify the value
	* Return:
		* value     - nil if not pass, the value may be changed during the validation
		* message   - the error message if the value failed the valiation, it's better to return true instead of the message if the onlyValid is true


The prototype may provide several methods(if provided must follow the rule):

* GetDefault(type)  - Gets the default value of the type
	* Params:
		* type      - the target type
	* Return:
		* default   - the default value of the type


* IsSubType(type, supertype)    - Whether the type is a sub type of the super type
	* Params:
		* type      - the target type
		* supertype - the super type
	* Return:
		* issubtype - true if the type is a sub type of the super type

* IsImmutable(type) - whether the value of the type is immutable, so the value won't be changed when pass through the validation
	* Params:
		* type      - the target type
	* Return:
		* immutable - true if the value of the type is immutable

* IsSealed(type)    - whether the type is sealed and can't be re-defined
	* Params:
		* type      - the target type
	* Return:
		* sealed    - true if the type is sealed

All validatable data type prototypes must provide the **ValidateValue** method. Only **enum** and **struct** has **GetDefault**. All **enum**, **interface** and **class** types are immutable, the **struct** type is immutable only if it has no initializer. We'll learn more in their topics.
